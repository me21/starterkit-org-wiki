#summary Сборка нескольких вариантов bootstrap

= Введение =

Начальный загрузчик atmel bootstrap позволяет загружать ядро Linux напрямую (в последних версиях появилась поддержка Device tree), а также standalone код (включая u-boot) с различных внешних накопителей - SD, NAND (DataFlash на платах starterkit с процессором at91sam9g45 не используется).  

== AT91Bootstrap v3.0 ==

Последняя версия на момент описания 3.5.3, оригинал взят [http://repository.timesys.com/buildsources/a/at91bootstrap-3/at91bootstrap-3-3.5.3 тут] 

Скачиваем оригинал (продублирован на googlecode.com)
{{{
mkdir -p ~/work
cd ~/work
wget http://starterkit-org.googlecode.com/files/at91bootstrap-3-3.5.3.tar.gz
tar xzvf at91bootstrap-3-3.5.3.tar.gz
}}}
Добавляем starterkit-специфичный патч - исправляет геометрию внешней памяти DDR2 и сброс аудиокодека AC97
{{{
wget http://starterkit-org.googlecode.com/files/at91bootstrap-3-3.5.3-sk.patch
cd at91bootstrap-3-3.5.3
patch -p1 < ../at91bootstrap-3-3.5.3-sk.patch
}}}
На данный момент конфигурация SDR не добавлена.

== Конфигурация ==

В составе boostrap есть предопределенные конфиги, которые находятся в директории 
{{{
at91bootstrap-3-3.5.3/board/at91sam9m10g45ek
}}}
Перед конфигурацией и сборкой нужно указать КК через переменную окружения CROSS_COMPILE, например для [CrosstoolNg  кросскомпилятора] который вы собрали сами
{{{
CROSS_COMPILE=arm-atmel-linux-gnueabi-
}}}



Конфигурацию можно менять посредством
{{{
make menuconfig
}}}
Параметры загрузки ядра можно менять тут:
{{{
Linux Image Storage Setup  --->
  (mem=64M console=ttyS0,115200 root=/dev/mmcblk0p2 rootwait debug) Linux kernel parameters
  (mat91_sd.bin) Binary Name on SD Card
}}}
Заодно, можно сменить имя файла на SD на uImage, чтобы переименованием не заниматься после [KernelBuild сборки ядра]. С другой стороны, название ядра, соответствующее типу процессора, тоже может оказаться удобным.
