#summary Сборка нескольких вариантов bootstrap

= Введение =

Начальный загрузчик atmel bootstrap позволяет загружать ядро Linux напрямую (в последних версиях появилась поддержка Device tree), а также standalone код (включая u-boot) с различных внешних накопителей - SD, NAND (DataFlash на платах starterkit с процессором at91sam9g45 не используется).    

= AT91Bootstrap v3.0 =

Последняя версия на момент описания 3.5.3, оригинал взят [http://repository.timesys.com/buildsources/a/at91bootstrap-3/at91bootstrap-3-3.5.3 тут] 

Скачиваем оригинал (продублирован на googlecode.com)
{{{
mkdir -p ~/work
cd ~/work
wget http://starterkit-org.googlecode.com/files/at91bootstrap-3-3.5.3.tar.gz
tar xzvf at91bootstrap-3-3.5.3.tar.gz
}}}
Добавляем starterkit-специфичный патч - исправляет геометрию внешней памяти DDR2 и сброс аудиокодека AC97
{{{
wget http://starterkit-org.googlecode.com/files/at91bootstrap-3-3.5.3-sk.patch
cd at91bootstrap-3-3.5.3
patch -p1 < ../at91bootstrap-3-3.5.3-sk.patch
}}}

Использованный компилятор: gcc version 4.6.4 20120402 (prerelease) (crosstool-NG 1.15.2) 

Конфигурацию можно менять посредством
{{{
make menuconfig
}}}
Параметры загрузки ядра можно менять тут:
{{{
Linux Image Storage Setup  --->
  (mem=64M console=ttyS0,115200 root=/dev/mmcblk0p2 rootwait debug) Linux kernel parameters
  (mat91_sd.bin) Binary Name on SD Card
}}}
Заодно, можно сменить имя файла на SD на uImage, чтобы переименованием не заниматься после [KernelBuild сборки ядра]. С другой стороны, название ядра, соответствующее типу процессора, тоже может оказаться удобным.

Сборка запускается командой
{{{
make CROSS_COMPILE=arm-atmel-linux-gnueabi-
}}}
CROSS_COMPILE - это префикс тулчейна, который получился после сборки [CrosstoolNg  кросскомпилятора]

= sk_mat91sam9g45 =

Использованный компилятор: Keil uVision 4.12 <br>
Установка в Wine 1.4.0: "wine MDK412.exe"

Фактически, необходимость пересборки была обусловлена только необходимостью включения [Watchdog watchdog] при загрузке с NAND, параметры ядра, в этом случае, задаются в [UBoot U-Boot].