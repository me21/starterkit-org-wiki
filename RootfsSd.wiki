#summary Перенос корневой ФС на SD.

== Введение ==

Пример разметки, форматирования SD карты и перенос на нее ФС собранной в buildroot. Модуль SK-SAM9G45-OEM загружается с microSD (разъем находится на самом модуле). 

== Разметка SD в fdisk ==

Все действия будем выполнять в консоли. При работе на виртуальной машине потребуется USB-кардридер. Чтобы диск обнаружился в гостевой ОС нужно разрешить для нее отображать USB-кардридер - нажать правую кнопку мышки на иконке с изображением USB-коннектора в правом нижнем углу окна в котором запущена виртуальная машина (третья по счету слева иконка) и отметить ваш кардридер, например у меня
{{{
USB Reaer USB Mass Storage Device [0201]
}}}
чтобы узнать название диска - смотрим выхлоп dmesg в терминале - нас интересуют последние записи
{{{
dmesg
[ 3474.733375] sd 4:0:0:0: Attached scsi generic sg2 type 0
[ 3474.765677] sd 4:0:0:0: [sdb] 15523840 512-byte logical blocks: (7.94 GB/7.40 GiB)
[ 3474.775780] sd 4:0:0:0: [sdb] Write Protect is off
[ 3474.775813] sd 4:0:0:0: [sdb] Mode Sense: 03 00 00 00
[ 3474.775827] sd 4:0:0:0: [sdb] Assuming drive cache: write through
[ 3474.824946] sd 4:0:0:0: [sdb] Assuming drive cache: write through
[ 3474.824978]  sdb: sdb1 sdb2
[ 3474.868309] sd 4:0:0:0: [sdb] Assuming drive cache: write through
[ 3474.868335] sd 4:0:0:0: [sdb] Attached SCSI removable disk
}}}
в данном случае мой диск - sdb с двумя первичными разделами sdb1, sdb2. Размонтируем диски (ОС по умолчанию автомонтирует разделы)
{{{
sudo umount /dev/sdb1
sudo umount /dev/sdb2
}}}
Удаляем таблицу разделов
{{{
sudo dd if=/dev/zero of=/dev/sdb bs=512 count=1 && sync
}}}
создаем новую таблицу разделов
{{{
sudo fdisk /dev/sdb

}}}