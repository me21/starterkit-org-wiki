#summary Удаленная работа с платой

== Введение ==

Некоторые полезные советы по удаленной работе с платой. Предполагается что на плате запущен SSH-сервер.

== Использование ключей для беспарольной работы с SSH ==

Для того чтобы каждый раз не вводить пароль, нужно сгенерировать пару закрытый+открытый ключ на хост-системе, скопировать на плату открытый ключ и добавить о нем информацию для пользователя от чьего имени будем работать на плате (root). Нужно выполнить команду ssh-keygen -t rsa, на все вопросы можно отвечать нажатием [Enter]
{{{
ssh-keygen -t rsa
Generating public/private rsa key pair.
Enter file in which to save the key (/home/sasa/.ssh/id_rsa): 
Enter passphrase (empty for no passphrase): 
Enter same passphrase again: 
Your identification has been saved in /home/sasa/.ssh/id_rsa.
Your public key has been saved in /home/sasa/.ssh/id_rsa.pub.
}}}  
копируем открытый ключ на плату 
{{{
scp /home/sasa/.ssh/id_rsa.pub root@192.168.0.136:/root
root@192.168.0.136's password: 123456
}}}
заходим на плату через SSH  и добавляем информацию о ключе
{{{
ssh root@192.168.0.136
root@192.168.0.136's password: 123456
mkdir ~/.ssh
cat id_rsa.pub > ~/.ssh/authorized_keys
exit
}}}

== Файловый менеджер Midnight Commander (mc) ==

Для начинающих пользователей Linux будет полезен этот файловый менеджер https://www.midnight-commander.org/, работающий в консольном режиме. Не стоит увлекаться им - описываю только для быстрого старта новичков - в дальнейшем вы поймете что никакой файловый менеджер или графический фронтенд облегчающий работу не заменит командную строку - работа в консоли намного удобней. Установка и запуск на host-системе. Для начала нужно удалить (если он установлен) mc идущий в дистрибутиве, там есть баг с неправильным отображением имен файлов на удаленной системе при работе с SSH.
{{{
sudo apt-get remove mc
rm -r ~/.mc
}}}
Устанавливаем из исходников
{{{
sudo apt-get install libglib2.0-dev libslang2-dev libslang2 libglib2.0-0
mkdir -p ~/work
cd ~/work
wget http://www.midnight-commander.org/downloads/mc-4.8.1.3.tar.bz2
tar xjvf mc-4.8.1.3.tar.bz2
cd mc-4.8.1.3
./configure
make
sudo make install
запускаем
mc
}}}
Если mc не запускается - перезапустите эмулятор терминала.
mc позволяет работать с удаленными устройствами по сети через ssh-соединение, при этом файловая система устройства представляется как локальная и позволяет копиррование/редактирование файлов средствами файлового менеджера. Чтобы установить соединение с платой, выберите в меню
{{{
Right -> Shell link
}}}

http://wiki.starterkit-org.googlecode.com/git/images/Screenshot-mc2.png

Введите имя_пользователя_на_удаленной_системе@ip.адрес
{{{
Shell link to machine -> root@192.168.0.136
}}}

http://wiki.starterkit-org.googlecode.com/git/images/Screenshot-mc3.png

Если не используются ключи SSH, в командной строке внизу появится приглашение для ввода пароля

http://wiki.starterkit-org.googlecode.com/git/images/Screenshot-mc4.png

введите пароль, например 
{{{
root@192.168.0.136's password: 123456
}}}

после ввода пароля вы увидите корневую ФС удаленного устройства

http://wiki.starterkit-org.googlecode.com/git/images/Screenshot-mc5.png

файлы можно копирровать/удалять/редактировать как будто они находятся на вашем компьютере.

== Работа в консоли через SSH ==

Мы можем выполнять удаленно команды на плате из терминала на хост-системе. Например посмотрим информацию о процессоре, выполнив в терминале на хост-системе
{{{
ssh root@192.168.0.136 cat /proc/cpuinfo
Processor	: ARM926EJ-S rev 5 (v5l)
BogoMIPS	: 199.06
Features	: swp half thumb fastmult edsp java 
CPU implementer	: 0x41
CPU architecture: 5TEJ
CPU variant	: 0x0
CPU part	: 0x926
CPU revision	: 5

Hardware	: Atmel AT91SAM9M10G45-EK
Revision	: 0000
Serial		: 0000000000000000
}}}
Работу можно еще упростить, если определить alias (псевдоним) для сокращенного набора. Например
{{{
alias oem="ssh root@192.168.0.136"
}}}
теперь, чтобы выполнить команду на удаленной системе в терминале хост-системы достаточно набрать
{{{
sasa@sasa-laptop:/$ oem cat /proc/cpuinfo 
Processor	: ARM926EJ-S rev 5 (v5l)
BogoMIPS	: 199.06
Features	: swp half thumb fastmult edsp java 
CPU implementer	: 0x41
CPU architecture: 5TEJ
CPU variant	: 0x0
CPU part	: 0x926
CPU revision	: 5

Hardware	: Atmel AT91SAM9M10G45-EK
Revision	: 0000
Serial		: 0000000000000000
}}}

В дальнейшем вы увидите насколько удобно работать в консоли.